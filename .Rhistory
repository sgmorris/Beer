# Package loads
library(ggplot2)
library(reshape2)
library(viridis)
# data load
DAT <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-10-20/beer_awards.csv')
str(DAT)
table(DAT$year)
table(DAT$category)
ipa <- grep("India", DAT$category)
ipa
ipa <- DAT[grep("India", DAT$category),]
unique(ipa$category)
ipa.yr <- table(ipa$year)
ipa.yr
subset(ipa, year==2020)
subset(ipa, year==2010)
ipa <- tapply(ipa$category, ipa$year, unique)
ipa
data.frame(ipa)
do.call("rbind", ipa)
do.call("c", ipa)
data.frame(ipa)
data.frame(ipa) -> dd
ipa <- DAT[grep("India", DAT$category),]
dd <- aggregates(category ~ year, data=ipa, FUN=unique)
dd <- aggregate(category ~ year, data=ipa, FUN=unique)
dd
tt <- table(ipa$year, ipa$category)
tt
data.frame(tt)
ipa <- data.frame(table(ipa$category, ipa$year))
head(ipa)
names(ipa) <- c("category","year","awards")
ipa <- subset(ipa, awards>0)
head(ipa)
ggplot(data=ipa, aes(x=year, y=awards, fill=category)) + geom_bar(stat="identity")
ipa <- DAT[grep("India", DAT$category),]
# number of unique categories by year eliminates duplicates with award type
ipa <- data.frame(table(ipa$category, ipa$year))
names(ipa) <- c("category","year","awards")
ipa <- subset(ipa, awards>0)
ipa$awards <- rep(1, nrow(ipa))
ggplot(data=ipa, aes(x=year, y=awards, fill=category)) + geom_bar(stat="identity")
ipa[order(ipa$year),]
table(ipa$year)
ipa <- DAT[grep("India", DAT$category),]
# use factor classes to gather similar names eg "India pale ale" anf "india pale ales"
ipa$category <- factor(ipa$category)
levels(ipa$category)
# categories including the word "India"
ipa <- DAT[grep("India", DAT$category),]
# use factor classes to gather similar names eg "India pale ale" anf "india pale ales"
ipa$category <- factor(ipa$category)
levels(ipa$category) <- c("India Pale Ale",
"American-Style India Black Ale",
"American-Style India Pale Ale",
"Emerging India Pale Ale",
"English-Style India Pale Ale",
"Experimental India Pale Ale",
"Imperial India Pale Ale",
"Imperial India Pale Ale",
"India Pale Ale",
"India Pale Ale",
"India Pale Lager",
"Juicy or Hazy Imperial India Pale Ale",
"Juicy or Hazy Imperial India Pale Ale",
"Juicy or Hazy India Pale Ale",
"Session India Pale Ale")
# number of unique categories by year eliminates duplicates with award type
ipa <- data.frame(table(ipa$category, ipa$year))
names(ipa) <- c("category","year","awards")
ipa <- subset(ipa, awards>0)
ipa$awards <- rep(1, nrow(ipa))
ggplot(data=ipa, aes(x=year, y=awards, fill=category)) + geom_bar(stat="identity")
ggplot(data=ipa, aes(x=year, y=awards, fill=category)) + geom_bar(stat="identity")
str(ipa)
cat.yr <- sort(tapply(ipa$year, ipa$category, min))
ipa <- DAT[grep("India", DAT$category),]
# use factor classes to gather similar names eg "India pale ale" anf "india pale ales"
ipa$category <- factor(ipa$category)
levels(ipa$category) <- c("India Pale Ale",
"American-Style India Black Ale",
"American-Style India Pale Ale",
"Emerging India Pale Ale",
"English-Style India Pale Ale",
"Experimental India Pale Ale",
"Imperial India Pale Ale",
"Imperial India Pale Ale",
"India Pale Ale",
"India Pale Ale",
"India Pale Lager",
"Juicy or Hazy Imperial India Pale Ale",
"Juicy or Hazy Imperial India Pale Ale",
"Juicy or Hazy India Pale Ale",
"Session India Pale Ale")
# number of unique categories by year eliminates duplicates with award type
ipa <- data.frame(table(ipa$category, ipa$year))
names(ipa) <- c("category","year","awards")
ipa <- subset(ipa, awards>0)
ipa$awards <- rep(1, nrow(ipa))
ipa$year <- as.numeric(as.character(ipa$year))
# order categories by first apperance
cat.yr <- sort(tapply(ipa$year, ipa$category, min))
cat.yr
help(geom_segment)
help(arrow)
ggplot(data=ipa, aes(x=year, y=awards, fill=category)) + geom_bar(stat="identity") +
geom_segment(aes(x=1995, y=3, xend=2000, yend=2))
ggplot(data=ipa, aes(x=year, y=awards, fill=category)) + geom_bar(stat="identity") +
geom_segment(aes(x=1995, y=3, xend=2000, yend=2))
help(ylab)
help(geom_text)
ggplot(data=ipa, aes(x=year, y=awards, fill=category)) + geom_bar(stat="identity") +
geom_segment(aes(x=2000, y=3, xend=2018, yend=7), col="blue", width=2) +
geom_text(aes(x=2005, y=6, label="Rise of the Hipsters"))
grep("india", DAT$category)
ipa <- DAT[grep("India", DAT$category, ignore.case=TRUE),]
ipa$category <- factor(ipa$category)
levels(ipa$category)
help(geom_segment)
library(ggplot2)
help(geom_segment)
# Package loads
library(ggplot2)
#library(viridis)
# data load
DAT <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-10-20/beer_awards.csv')
ipa <- data.frame(table(ipa$category, ipa$year))
names(ipa) <- c("category","year","awards")
# exclude zeroes and convert the observations to 1
ipa <- subset(ipa, awards>0)
ipa$awards <- rep(1, nrow(ipa))
# year as numeric means ggplot does a nicer x-axis than with year as a factor
ipa$year <- as.numeric(as.character(ipa$year))
# order categories by first appearance so the legend from top to bottom will match the category appearance from left to right
cat.yr <- sort(tapply(ipa$year, ipa$category, min))
ipa$category <- ordered(ipa$category, names(cat.yr))
ggplot(data=ipa, aes(x=year, y=awards, fill=category)) + geom_bar(stat="identity") +
geom_segment(aes(x=2000, y=3, xend=2018, yend=7), col="blue", size=2, arrow="fill") +
geom_text(aes(x=2005, y=6, label="Rise of the Hipsters")) +
ylab("Number of India ale categories") + ggtitle("IPA used to be IPA")
help(arrow)
ggplot(data=ipa, aes(x=year, y=awards, fill=category)) + geom_bar(stat="identity") +
geom_segment(aes(x=2000, y=3, xend=2018, yend=7), col="blue", size=2,
arrow=arrow()) +
geom_text(aes(x=2005, y=6, label="Rise of the Hipsters")) +
ylab("Number of India ale categories") + ggtitle("IPA used to be IPA")
ggplot(data=ipa, aes(x=year, y=awards, fill=category)) + geom_bar(stat="identity") +
geom_curve(aes(x=2000, y=3, xend=2018, yend=7), col="blue", size=2,
arrow=arrow()) +
geom_text(aes(x=2005, y=6, label="Rise of the Hipsters")) +
ylab("Number of India ale categories") + ggtitle("IPA used to be IPA")
help(geom_curve)
library(ggplot2)
help(geom_curve)
# Package loads
library(ggplot2)
# data load
DAT <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-10-20/beer_awards.csv')
ggplot(data=ipa, aes(x=year, y=awards, fill=category)) + geom_bar(stat="identity") +
geom_curve(aes(x=2000, y=3, xend=2018, yend=8), col=2, size=1.5,
arrow=arrow(length=unit(0.01,"npc"))) +
geom_text(aes(x=2005, y=6, label="Rise of the Hipsters")) +
ylab("Number of India ale categories") + ggtitle("IPA used to be IPA")
# Package loads
# for graphs
library(ggplot2)
# cool palette
library(viridis)
# data load
DAT <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-10-20/beer_awards.csv')
jpeg("figure 1.jpg", width=20, height=15, units='cm', res=600)
print(p1)
